{% extends "base.html" %}

{% block title %}
	Render Graph - Afterglow
{% endblock %}

{% block extra_head %}	
	<link type="text/css" rel="stylesheet" href="{{ STATIC_URL }}css/jquery.miniColors.css" />
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
	<script type="text/javascript" src="{{ STATIC_URL }}js/jquery.miniColors.min.js"></script>
	<script type="text/javascript" src="{{ STATIC_URL }}js/form.js"></script>
{% endblock %}

{% block body %}

	{% if form.errors %}
		Please correct the error{{ form.errors|pluralize }} below.
	{% endif %}

	<form enctype="multipart/form-data" method="post" action="process" id="renderMainForm">
		{% csrf_token %}

		<div class="field">

			{{ form.dataFile.errors }}
			<label>Data:</label>
			{{ form.dataFile }} 
			<div class="cError"><span id="dataFileE" class="cErrorMsg"></span></div>

		</div>

		<div class="field">

			{{ form.twoNodeMode.errors }}
			<label>Two node mode:</label>
			{{ form.twoNodeMode }}

		</div>

		<div id="settingsLabel"> Settings: </div>

		<div id="mainSettings">

			<div class="field"> 

				{{ form.printNodeCount.errors }}
				<label>Print node count:</label>
				{{ form.printNodeCount }}

			</div>

			<div class="field">

				{{ form.omitLabelling.errors }}
				<label>Omit node labelling:</label>
				{{ form.omitLabelling }}

			</div>

			<div class="field">

				{{ form.splitNodes.errors }}
				<label>Split source and target nodes:</label>
				{{ form.splitNodes }}

			</div>

			<div class="field">

				{{ form.splitMode.errors }}
				<label>Splitting:</label>
				{{ form.splitMode }}

			</div>

			<div class="field">

				{{ form.overrideEdge.errors }}
				{{ form.overrideEdgeLength.errors }}
				<label>Override edge length:</label>
				{{ form.overrideEdge }} &nbsp;&nbsp;&nbsp;&nbsp; 
				{{form.overrideEdgeLength }}
				<div class="cError"><span id="overrideEdgeE" class="cErrorMsg"></span></div>
			</div>

			<div class="field">

				{{ form.textLabel.errors }}
				<label>Text label colour:</label>
				{{ form.textLabel }}

			</div>
	   </div>
	   
	   <div id="advancedLabel"> Advanced Settings: </div>

		<div id="advanced">

			<div class="field">

				{{ form.skipLines.errors }}
				<label>Skip Lines:</label>
				{{ form.skipLines }}
				<div class="cError"><span id="skipLinesE" class="cErrorMsg"></span></div>

			</div>

			<div class="field">

				{{ form.maxLines.errors }}
				<label>Maximum lines:</label>
				{{ form.maxLines }}
				<div class="cError"><span id="maxLinesE" class="cErrorMsg"></span></div>

			</div>

			<div class="field">

				{{ form.omitThreshold.errors }}
				<label>Omit threshold for each node:</label>
				{{ form.omitThreshold }}
				<div class="cError"><span id="omitThresholdE" class="cErrorMsg"></span></div>

			</div>

			<div class="field">

				{{ form.sourceFanOut.errors }}
				<label>Source fan out threshold:</label>
				{{ form.sourceFanOut }}
				<div class="cError"><span id="sourceFanOutE" class="cErrorMsg"></span></div>

			</div>

			<div class="field">

				{{ form.eventFanOut.errors }}
				<label>Event fan out threshold:</label>
				{{ form.eventFanOut }}
				<div class="cError"><span id="eventFanOutE" class="cErrorMsg"></span></div>

			</div>
	   </div>

		<div id="configLabel">Configuration: </div>

		<div id="config">

			<div id="alreadyLabel"> Added configurations: </div>

			<div id="alreadyAdded"> </div>

			<br/><br/>

			<div id="alreadyAddedHidden"> </div>

			{{ form.propertyConfig }}

			<br/><br/>

			<div id="configType">
				<span id="configTypeText">Config Type:</span>
				<input type="radio" name="xConfigType" checked="checked" value="custom" class="configTypeRadio"/>Custom
				<input type="radio" name="xConfigType" value="manual" class="configTypeRadio"/>Manual
			</div>

			<br/><br/>

			<div id="manualConfig">

				<textarea rows="10" cols="50" name="xManualConfig" id="xManualConfig"></textarea>

			</div>

			<div id="customConfig">

				<fieldset id="fieldColour">

					<legend>Add: Colour</legend>
					
					<div class="field">
						<label>Node:</label>
						<select name="xColourType" id="xColourType">
							<option>Source</option>
							<option>Event</option>
							<option>Target</option>
							<option>Edge</option>
							<option>All</option>
						</select>
					</div>
					
					<div class="field">
						<label>Colour:</label> <input type="text" name="xColourHEX" id="xColourHEX" />
					</div>
					
					<div class="field"><label><u>Condition</u>:<label></div> <br/><br/>
					
					<input type="radio" name="xColourRadio" id="xColourRadioNone" checked="checked" value="none"/>None<br/>
					
					<div class="field">
						<label><input type="radio" name="xColourRadio" id="xColourRadioIf" value="if"/>IF Condition:</label>
						<input type="text" name="xColourIfCondition" id="xColourIfCondition" />
					</div>
					
					<div class="field">
						<label><input type="radio" name="xColourRadio" id="xColourRadioCustom" value="custom"/>Custom condition:</label>
						<input type="text" name="xColourCustomCondition" id="xColourCustomCondition" />
					</div>
					
					<button name="xColourButton" id="xColourButton" class="addButton"></button>
				</fieldset>

				<fieldset id="fieldThreshold">

					<legend>Add: Threshold Filter</legend>

					<div class="field">					
						<label>Node:</label> 
						<select name="xThresholdType" id="xThresholdType">
							<option>Source</option>
							<option>Event</option>
							<option>Target</option>
							<option>All</option>
						</select>
					</div>
					
					<div class="field">					
						<label>Threshold:</label>
					 	<input type="text" name="xThresholdSize" id="xThresholdSize" />
					</div>

					<button name="xThresholdButton" id="xThresholdButton" class="addButton"></button>
					<div class="cErrorConfig"><span id="thresholdE" class="cErrorMsg"></span></div>
				</fieldset>

				<div class="clear"></div>
				<br/><br/>

				<fieldset id="fieldSize">

					<legend>Add: Node Sizes</legend>

					<div class="field">					
						<label>Node:</label>
						<select name="xSizeType" id="xSizeType">
							<option>Source</option>
							<option>Event</option>
							<option>Target</option>
							<option>All</option>
						</select>
					</div>

					<div class="field"><label><u>Condition</u>:<label></div> <br/><br/>
					
					<div class="field">
						<label><input type="radio" name="xSizeRadio" id="xSizeRadioExp" checked="checked" value="exp"/>Expression:</label>
						<input type="text" name="xSizeCondition" id="xSizeCondition"/>
					</div>
					
					<div class="field">
						<label><input type="radio" name="xSizeRadio" id="xSizeRadioPre value="pre"/>Predefined:</label>
						<select name="xSizePreType" id="xSizePreType">
							<option value="num">Number of occurrences</option>
							<option value="third">Third data column</option>
							<option value="fourth">Fourth data column</option>
						</select>
					</div>

					<button name="xSizeButton" id="xSizeButton" class="addButton"></button>
				</fieldset>

				<fieldset id="fieldGlobals">

					<legend>Add: Global settings</legend>

					<div class="field">
						<label>Max node size:</label>
						<input type="text" name="xSizeMaxSize" id="xSizeMaxSize" />
						<button name="xMaxNodeSizeButton" id="xMaxNodeSizeButton" class="addButtonSmall"></button>
					</div>
					
					<div class="cErrorConfig"><span id="maxNodeSizeE" class="cErrorMsg"></span></div>
					
					<div class="field">
						<label>Sum Nodes:</label>
						<select name="xSumType" id="xSumType">
							<option id="xSumOptionSource">Source</option>
							<option id="xSumOptionEvent">Event</option>
							<option id="xSumOptionTarget">Target</option>
						</select>
						<button name="xSumButton" id="xSumButton" class="addButtonSmall"></button>
					</div>

					
				</fieldset>

				<div class="clear"></div>
				<br/><br/>

				<fieldset id="fieldClustering">

					<legend>Add: Clustering</legend>

					<div class="field">
						<label>Node:</label>
						<select name="xClusteringType" id="xClusteringType">
							<option>Source</option>
							<option>Event</option>
							<option>Target</option>
							<option>All</option>
						</select>
					</div>
					
					<div class="field"><label><u>Condition</u>:<label></div> <br/><br/>
					
					<div class="field">
						<label><input type="radio" name="xClusteringRadio" id="xClusteringRadioIP" value="ip" checked="checked"/>IP Classes:</label>
						<select name="xClusteringIPType" id="xClusteringIPType">
							<option>Class A</option>
							<option>Class B</option>
							<option>Class C</option>
							<option>Class D</option>
						</select>
					</div>
					
					<div class="field">
						<label><input type="radio" name="xClusteringRadio" id="xClusteringRadioExp" value="exp"/>Expression:</label>
						<input type="text" name="xClusteringCondition" id="xClusteringCondition"/>
					</div>
					
					<button name="xClusteringButton" id="xClusteringButton" class="addButton"></button>
				</fieldset>

				<fieldset id="fieldCustom">

					<legend>Add: Custom Line</legend>

					<input type="text" name="xCustomCondition" id="xCustomCondition"/>
					<button name="xCustomButton" id="xCustomButton" class="addButton"></button>
				</fieldset>

				<div class="clear"></div>
			</div>
		</div>

		<br/><br/>

		<div class="field">

			<label>Save configuration:</label>
			{{ form.saveConfigCookie }}

		</div>

		<input type="submit" value="Render">
	</form>

{% endblock %}
